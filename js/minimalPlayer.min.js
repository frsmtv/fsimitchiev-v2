!function(n){n.fn.minimalPlayer=function(i){function o(){a(),s()}function a(){if(Modernizr.audio){w.append('<div id="player"></div>'),w.find("#player").append('<div id="knobSlider"><input class="knob" data-fgColor="'+_.fgKnobColor+'" data-bgColor="'+_.bgKnobColor+'" data-bColor="'+_.buttonColor+'" data-displayInput="false" data-thickness=0.25 value="0"></div>'),w.find("#player").append('<div id="play_pause"></div>'),w.find("#play_pause").append('<div id="playBtn"><svg version="1.1" viewBox="0 0 25 25" preserveAspectRatio="xMinYMin slice">'+L+"</svg></div>").append('<div id="pauseBtn"><svg version="1.1" viewBox="0 0 25 25" preserveAspectRatio="xMinYMin meet">'+x+"</svg></div>"),d(),m=_.width,E=_.height,w.find(".knob").knob({width:m,height:E,change:function(n){C()},released:function(n){b()},release:function(n){b()},clicked:function(n){y()},hit:function(){y(),C(),b()}});var n=Math.floor(40*_.width)/100;w.find("#play_pause").css({width:n+"px",height:n+"px"}),w.find("#player").append('<audio id="audio" autobuffer preload="auto"></audio>'),k=w.find("#audio")[0],w.find("#player").data("group",_.group),r(_.songs),_.autoStart&&w.find("#audio").attr("autoplay","autoplay")}else w.append('<div id="warning"><img src="assets/warning.png"/>Your browser not support HTML5 audio!</div>')}function e(i){if(i&&_.autoStart)var o=":not(:first)";else var o="";n("audio"+o).each(function(i,o){var a=n(this).parent("#player"),e=n(this)[0];a.data("group")&&e.pause()})}function t(n){w.find("#player").data("group")&&e(n)}function d(){null!=(_.width&&_.height)&&w.find("#player").css({width:_.width+"px",height:_.height+"px"})}function r(n){for(var i="",o=0;o<n.length;o++)""!=n[o]&&(l(n[o])?u(n[o]):i+='<source src="'+n[o]+'" type="audio/'+n[o].replace(/^.*\./,"")+'">');w.find("#audio").html(i),k.load(),console.log(i)}function l(n){var i=n.replace(/^.*\./,"");return"mp3"!=i&&"ogg"!=i&&"wav"!=i?!0:!1}function u(n){console.log("soundCloud...");var i="";SC.initialize({client_id:_.soundCloudID}),SC.get("/tracks/"+n,{},function(n){i+="<source src='"+n.uri+"/stream?client_id="+_.soundCloudID+"'>",w.find("#audio").html(i),k.load()})}function s(){k.addEventListener("loadstart",function(){console.log("Start Player!"),w.find(".knob").val(0).trigger("change"),t(!0)},!1),k.addEventListener("progress",function(){console.log("Progress Sound!")},!1),k.addEventListener("loadedmetadata",function(){console.log("data loaded!")},!1),k.addEventListener("timeupdate",v,!1),k.addEventListener("play",g,!1),k.addEventListener("pause",h,!1),k.addEventListener("ended",f,!1),w.find("#play_pause").on("click",c),w.find("audio").on("error",p),w.find("source").on("error",p)}function p(n){console.log("Error Loading/Playing Sound!"),w.find("#play_pause").html('<img src="assets/warning.svg"/>'),w.find("#play_pause").off("click"),w.find("#play_pause").on("click",function(){alert("Error Loading Sound!")})}function c(n){k.paused?(t(),k.play()):k.played&&k.pause()}function f(){_.autoReplay?(k.play(),g()):(w.find(".knob").val(0).trigger("change"),h())}function g(){M=!0,w.find("#playBtn").css({display:"none"}),w.find("#pauseBtn").css({display:"block"})}function h(){M=!1,w.find("#playBtn").css({display:"block"}),w.find("#pauseBtn").css({display:"none"})}function v(){!S&&M&&(currentSeek=Math.floor(this.currentTime/this.duration*100),w.find(".knob").val(currentSeek).trigger("change"))}function y(){S=!0}function b(){S=!1}function C(){S&&(k.currentTime=w.find(".knob").val()/100*k.duration)}var k,w=n(this),m=0,E=0,S=!1,M=!1,L='<path fill="#ED1C24" d="M8.3,4.9l9.9,6.5c0.8,0.5,0.8,1.7,0,2.2l-9.9,6.5C7.3,20.7,6.2,20,6.2,19V6C6.2,5,7.3,4.3,8.3,4.9z"/>',x='<path fill="#ED1C24" d="M10.9,4.7H6.8c-0.3,0-0.5,0.2-0.5,0.5v14.7c0,0.3,0.2,0.5,0.5,0.5h4.1c0.3,0,0.5-0.2,0.5-0.5V5.2C11.4,4.9,11.2,4.7,10.9,4.7z"/><path fill="#ED1C24" d="M18.2,4.7h-4.1c-0.3,0-0.5,0.2-0.5,0.5v14.7c0,0.3,0.2,0.5,0.5,0.5h4.1c0.3,0,0.5-0.2,0.5-0.5V5.2C18.7,4.9,18.5,4.7,18.2,4.7z"/>',_=n.extend({width:50,height:50,songs:[],autoStart:!1,autoReplay:!1,bgKnobColor:"",fgKnobColor:"",buttonColor:"",group:!1,soundCloudID:""},i);o()}}(jQuery);